{"version":3,"sources":["reportWebVitals.ts","Utils.ts","components/utils/ErrorBoundary.tsx","components/utils/Loader.tsx","components/panels/DiceHome/react-three-components/Surface/black-wood.jpeg","components/panels/DiceHome/react-three-components/Surface/Surface.tsx","components/panels/DiceHome/react-three-components/Dice/one-dice.lwo","components/panels/DiceHome/react-three-components/Dice/Dice.tsx","components/panels/DiceHome/react-three-components/DebugInDev.tsx","components/panels/DiceHome/react-three-components/Wall/Wall.tsx","components/panels/DiceHome/react-three-components/Walls/Walls.tsx","components/panels/DiceHome/DiceHome.tsx","components/App/App.tsx","core/trackers/tracker-utils.ts","core/trackers/LocalTracker.ts","URLUtils.ts","core/trackers/MixpanelTracker.ts","core/trackers/trackers.ts","constants.ts","core/components/WithUser.tsx","components/AppWrapper/AppWrapper.tsx","index.tsx","components/panels/DiceHome/DiceHome.module.css"],"names":["reportWebVitals","onPerfEntry","then","getCLS","getFID","getFCP","getLCP","getTTFB","Utils","min","max","Math","floor","random","number","generateRandom","changeSignRandomly","isProductionMode","process","ErrorBoundary","children","fallback","error","componentStack","resetError","message","onClick","Loader","Surface","usePlane","rotation","PI","position","ref","texture","useLoader","TextureLoader","woodenTableTextureUrl","wrapS","RepeatWrapping","repeat","set","args","map","diceScale","Dice","forwardRef","props","dice","LWOLoader","oneDiceUrl","meshes","scale","MathUtils","degToRad","useBox","mass","meshRef","meshApi","useImperativeHandle","roll","velocity","generateRandomWithRandomSign","angularVelocity","opacity","transparent","object","DebugInDev","useState","DebugElement","useEffect","Wall","Walls","DiceHome","diceRef","useRef","className","styles","canvasWrapper","onCreated","threeState","gl","physicallyCorrectLights","camera","setRotationFromEuler","Euler","translateY","translateZ","antialias","onPointerMissed","current","gravity","defaultContactMaterial","friction","restitution","contactEquationStiffness","contactEquationRelaxation","frictionEquationStiffness","frictionEquationRelaxation","attach","color","intensity","views","title","Icon","Icon28Dice5Outline","storyId","renderView","Icon24GearOutline","Icon28HelpOutline","App","loadingUser","popout","loadingTooLong","setLoadingTooLong","activeStory","setActiveStory","timerId","window","setTimeout","clearTimeout","popoutToRender","tabbar","text","selected","id","activePanel","createTracker","tracker","AUTOMATIC_OPERATIONS","LocalTracker","init","console","log","identify","vkId","reachGoal","name","params","URLUtils","URLSearchParams","location","hash","slice","get","MixpanelTracker","mixpanel","api_host","userParams","getHashParam","String","people","set_once","register_once","track","registeredTrackers","call","method","forEach","includes","Themes","trackers","WithUser","user","setUser","setLoadingUser","a","isInitialRequest","bridge","send","vkUser","fetchUser","AppWrapper","setPopout","bright_light","theme","setTheme","subscribe","detail","type","data","scheme","schemeAttribute","document","createAttribute","value","body","attributes","setNamedItem","Sentry","dsn","beforeSend","event","hint","exception","errorMessage","originalException","Error","actions","mode","autoclose","onClose","ReactDOM","render","StrictMode","getElementById","module","exports"],"mappings":"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","file":"static/js/main.af9567c6.chunk.js","sourcesContent":["import { ReportHandler } from 'web-vitals'\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler): void => {\n  if (onPerfEntry) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry)\n      getFID(onPerfEntry)\n      getFCP(onPerfEntry)\n      getLCP(onPerfEntry)\n      getTTFB(onPerfEntry)\n    })\n  }\n}\n\nexport default reportWebVitals\n","export class Utils {\n  static isProductionMode = process.env.NODE_ENV === 'production'\n\n  static generateRandom(min: number, max: number): number {\n    // min and max included\n    return Math.floor(Math.random() * (max - min + 1) + min)\n  }\n\n  static changeSignRandomly(number: number): number {\n    return Utils.generateRandom(0, 1) === 0 ? -number : number\n  }\n\n  static generateRandomWithRandomSign(min: number, max: number): number {\n    return Utils.changeSignRandomly(Utils.generateRandom(min, max))\n  }\n}\n","import * as Sentry from '@sentry/react'\nimport { Button } from '@vkontakte/vkui'\nimport { Utils } from '../../Utils'\n\ntype Props = {\n  children: JSX.Element\n}\n\n/**\n * Component catches only errors in rendering phase and lifecycle\n * Errors in click and async handlers need to be caught and rendered separately\n */\nexport function ErrorBoundary({ children }: Props): JSX.Element {\n  if (!Utils.isProductionMode) return children\n\n  return (\n    <Sentry.ErrorBoundary\n      fallback={({ error, componentStack, resetError }) => (\n        <>\n          <div>Ошибка отрисовки:</div>\n          <p>{error.message}</p>\n          <p>{componentStack}</p>\n          <Button onClick={resetError}>Попробовать еще раз</Button>\n        </>\n      )}\n    >\n      {children}\n    </Sentry.ErrorBoundary>\n  )\n}\n","import { useEffect, useState } from 'react'\nimport { PanelSpinner } from '@vkontakte/vkui'\n\ntype Props = {\n  delay?: number\n  render?(): JSX.Element | null\n}\n\nexport const DELAY_BEFORE_LOADER = 200\n\nfunction Loader({\n  delay = DELAY_BEFORE_LOADER,\n  render = () => <PanelSpinner size=\"large\" />,\n}: Props): JSX.Element | null {\n  const [pastDelay, setPastDelay] = useState(false)\n  useEffect(() => {\n    const timerId = setTimeout(() => {\n      setPastDelay(true)\n    }, delay)\n    return () => {\n      clearTimeout(timerId)\n    }\n  }, [delay])\n\n  if (pastDelay) return render()\n  return null\n}\n\nexport default Loader\n","export default __webpack_public_path__ + \"static/media/black-wood.711c4483.jpeg\";","import { usePlane } from '@react-three/cannon'\nimport { RepeatWrapping, TextureLoader } from 'three'\nimport woodenTableTextureUrl from './black-wood.jpeg'\nimport { useLoader } from '@react-three/fiber'\n\nexport function Surface(): JSX.Element {\n  const [ref] = usePlane(() => ({\n    rotation: [-Math.PI / 2, 0, 0],\n    position: [0, 0, 0],\n  }))\n  const texture = useLoader(TextureLoader, woodenTableTextureUrl)\n  texture.wrapS = RepeatWrapping\n  texture.repeat.set(4, 1)\n\n  return (\n    <mesh ref={ref}>\n      <planeBufferGeometry args={[30, 30]} />\n      <meshStandardMaterial map={texture} />\n    </mesh>\n  )\n}\n","export default __webpack_public_path__ + \"static/media/one-dice.11b109f6.lwo\";","import { useLoader } from '@react-three/fiber'\nimport { LWOLoader } from 'three/examples/jsm/loaders/LWOLoader'\nimport oneDiceUrl from './one-dice.lwo'\nimport { MathUtils } from 'three'\nimport { useBox } from '@react-three/cannon'\nimport { forwardRef, useImperativeHandle } from 'react'\nimport { Utils } from '../../../../../Utils'\n\nconst diceScale = 0.55\n\nexport type DiceRef = {\n  roll(): void\n}\n\nexport const Dice = forwardRef((props, ref): JSX.Element => {\n  const loadedDice = useLoader(LWOLoader, oneDiceUrl)\n  const dice = loadedDice.meshes[0]\n  dice.scale.set(0.25, 0.25, 0.25)\n  dice.rotation.set(0, 0, MathUtils.degToRad(-45))\n  dice.position.set(-0.5, -0.5, 0)\n\n  const [meshRef, meshApi] = useBox(() => ({\n    mass: 0.1,\n    position: [0, 2, 0],\n    rotation: [0, 0, MathUtils.degToRad(30)],\n  }))\n\n  useImperativeHandle(ref, () => ({\n    roll: () => {\n      meshApi.velocity.set(\n        Utils.generateRandomWithRandomSign(5, 10),\n        Utils.generateRandomWithRandomSign(5, 10),\n        Utils.generateRandomWithRandomSign(5, 10)\n      )\n      meshApi.angularVelocity.set(\n        Utils.generateRandomWithRandomSign(5, 20),\n        Utils.generateRandomWithRandomSign(5, 20),\n        Utils.generateRandomWithRandomSign(5, 20)\n      )\n    },\n  }))\n\n  return (\n    <mesh ref={meshRef} scale={[diceScale, diceScale, diceScale]}>\n      <boxBufferGeometry />\n      {/* collision box */}\n      <meshBasicMaterial opacity={0} transparent />\n      <mesh>\n        {/* rendering material that is not affected by collisions */}\n        <primitive object={dice} />\n      </mesh>\n    </mesh>\n  )\n})\n","import { ReactNode, useEffect, useState } from 'react'\nimport { DebugProps } from '@react-three/cannon/dist/Debug'\n\ntype DebugInDevProps = {\n  children: ReactNode\n}\n\nexport function DebugInDev({ children }: DebugInDevProps): JSX.Element {\n  const [DebugElement, setDebugElement] = useState<\n    ((props: DebugProps) => JSX.Element) | null\n  >(null)\n  useEffect(() => {\n    async function fetch() {\n      const { Debug } = await import('@react-three/cannon')\n      setDebugElement(() => Debug)\n    }\n\n    if (process.env.NODE_ENV === 'development') {\n      fetch()\n    }\n  }, [])\n  if (DebugElement) {\n    return <DebugElement scale={1.1}>{children}</DebugElement>\n  }\n  return <>{children}</>\n}\n","import { usePlane } from '@react-three/cannon'\nimport { PlaneProps } from '@react-three/cannon/src/hooks'\n\nconst WALL_LENGTH = 30\n\nexport function Wall(props: PlaneProps): JSX.Element {\n  const [ref] = usePlane(() => props)\n  return (\n    <mesh ref={ref}>\n      <planeBufferGeometry args={[WALL_LENGTH, WALL_LENGTH]} />\n      <meshStandardMaterial transparent opacity={0} />\n    </mesh>\n  )\n}\n","import { Wall } from '../Wall/Wall'\nimport { MathUtils } from 'three'\n\nexport function Walls(): JSX.Element {\n  return (\n    <>\n      <Wall rotation={[0, 0, 0]} position={[0, 0, -7]} key=\"top\" />\n      <Wall\n        rotation={[0, MathUtils.degToRad(180), 0]}\n        position={[0, 0, 5]}\n        key=\"bottom\"\n      />\n      <Wall\n        rotation={[0, MathUtils.degToRad(115), 0]}\n        position={[-6.5, 0, 0]}\n        key=\"left\"\n      />\n      <Wall\n        rotation={[0, MathUtils.degToRad(-115), 0]}\n        position={[6.5, 0, 0]}\n        key=\"right\"\n      />\n      <Wall rotation={[Math.PI / 2, 0, 0]} position={[0, 6, 0]} key=\"ceiling\" />\n    </>\n  )\n}\n","import { Canvas } from '@react-three/fiber'\nimport { Suspense, useRef } from 'react'\nimport { Physics } from '@react-three/cannon'\nimport { Surface } from './react-three-components/Surface/Surface'\nimport { Dice, DiceRef } from './react-three-components/Dice/Dice'\nimport { DebugInDev } from './react-three-components/DebugInDev'\nimport styles from './DiceHome.module.css'\nimport { Euler, MathUtils } from 'three'\nimport { Walls } from './react-three-components/Walls/Walls'\n\nfunction DiceHome(): JSX.Element {\n  const diceRef = useRef<DiceRef>(null)\n  return (\n    <div className={styles.canvasWrapper}>\n      <Canvas\n        onCreated={(threeState) => {\n          // eslint-disable-next-line no-param-reassign\n          threeState.gl.physicallyCorrectLights = true\n          threeState.camera.setRotationFromEuler(\n            new Euler(MathUtils.degToRad(-60), 0, 0)\n          )\n          threeState.camera.translateY(3.5)\n          threeState.camera.translateZ(4.5)\n        }}\n        gl={{ antialias: true }}\n        onPointerMissed={() => diceRef.current?.roll()}\n      >\n        <Suspense fallback={null}>\n          <Physics\n            gravity={[0, -9.82, 0]}\n            defaultContactMaterial={{\n              friction: 0.1,\n              restitution: 0.6,\n              contactEquationStiffness: 1e7,\n              contactEquationRelaxation: 1,\n              frictionEquationStiffness: 1e7,\n              frictionEquationRelaxation: 2,\n            }}\n          >\n            <DebugInDev>\n              <color attach=\"background\" args={['lightgrey']} />\n              <directionalLight\n                color=\"white\"\n                intensity={2.5}\n                position={[0, 8, 5]}\n              />\n              <Dice ref={diceRef} />\n              <Surface />\n              <Walls />\n            </DebugInDev>\n          </Physics>\n        </Suspense>\n      </Canvas>\n    </div>\n  )\n}\n\nexport default DiceHome\n","import {\n  Epic,\n  Panel,\n  ScreenSpinner,\n  Tabbar,\n  TabbarItem,\n  View,\n} from '@vkontakte/vkui'\nimport { useEffect, useState } from 'react'\nimport { DELAY_BEFORE_LOADER } from '../utils/Loader'\nimport {\n  Icon28Dice5Outline,\n  Icon24GearOutline,\n  Icon28HelpOutline,\n} from '@vkontakte/icons'\nimport DiceHome from '../panels/DiceHome/DiceHome'\n\ntype Props = {\n  loadingUser: boolean\n  popout: JSX.Element | null\n}\n\nconst views = [\n  {\n    title: 'Главная',\n    Icon: Icon28Dice5Outline,\n    storyId: 'dice',\n    renderView: (): JSX.Element | string => <DiceHome />,\n  },\n  {\n    title: 'Настройки',\n    Icon: Icon24GearOutline,\n    storyId: 'settings',\n    renderView: (): JSX.Element | string => 'settings home',\n  },\n  {\n    title: 'Помощь',\n    Icon: Icon28HelpOutline,\n    storyId: 'help',\n    renderView: (): JSX.Element | string => 'help home',\n  },\n]\n\nexport function App({ loadingUser, popout }: Props): JSX.Element {\n  const [loadingTooLong, setLoadingTooLong] = useState(false)\n  const [activeStory, setActiveStory] = useState('dice')\n\n  useEffect(() => {\n    let timerId: number\n    if (loadingUser)\n      timerId = window.setTimeout(() => {\n        setLoadingTooLong(true)\n      }, DELAY_BEFORE_LOADER)\n    else setLoadingTooLong(false)\n    return () => {\n      clearTimeout(timerId)\n    }\n  }, [loadingUser])\n\n  let popoutToRender: JSX.Element | null = null\n  if (popout) popoutToRender = popout\n  else if (loadingUser && loadingTooLong) popoutToRender = <ScreenSpinner />\n  return (\n    <Epic\n      activeStory={activeStory}\n      tabbar={\n        <Tabbar>\n          {views.map(({ Icon, storyId, title }) => (\n            <TabbarItem\n              text={title}\n              selected={activeStory === storyId}\n              onClick={() => setActiveStory(storyId)}\n              key={storyId}\n            >\n              <Icon />\n            </TabbarItem>\n          ))}\n        </Tabbar>\n      }\n    >\n      {views.map(({ storyId, renderView }) => (\n        <View\n          id={storyId}\n          activePanel={`${storyId}-home`}\n          popout={popoutToRender}\n          key={storyId}\n        >\n          <Panel id={`${storyId}-home`}>{renderView()}</Panel>\n        </View>\n      ))}\n    </Epic>\n  )\n}\n","export interface TrackerInterface {\n  AUTOMATIC_OPERATIONS: Array<string>\n  init: () => Promise<void>\n  identify: (vkId: number) => Promise<void>\n  reachGoal: (name: string, params?: Record<string, unknown>) => Promise<void>\n}\n\ntype Optional<T, K extends keyof T> = Pick<Partial<T>, K> & Omit<T, K>\n\ntype TrackerInput = Optional<TrackerInterface, 'AUTOMATIC_OPERATIONS'>\n\nexport const createTracker = (tracker: TrackerInput): TrackerInterface => ({\n  AUTOMATIC_OPERATIONS: ['*'],\n  ...tracker,\n})\n","/* eslint-disable no-console */\nimport { createTracker, TrackerInterface } from './tracker-utils'\n\nexport const LocalTracker: TrackerInterface = createTracker({\n  async init(): Promise<void> {\n    console.log('Init tracker')\n  },\n\n  async identify(vkId: number): Promise<void> {\n    console.log(`linked session with vkId ${vkId}`)\n  },\n\n  async reachGoal(\n    name: string,\n    params?: Record<string, unknown>\n  ): Promise<void> {\n    if (!params) console.log(`Reach goal ${name}`)\n    else console.log(`Reach goal ${name} with params`, params)\n  },\n})\n","export class URLUtils {\n  static getHashParam(name: string): string {\n    const hashParams = new URLSearchParams(window.location.hash.slice(1))\n    return hashParams.get(name) || ''\n  }\n}\n","import mixpanel from 'mixpanel-browser'\nimport { createTracker, TrackerInterface } from './tracker-utils'\nimport { URLUtils } from '../../URLUtils'\n\nconst MIXPANEL_ID = process.env.REACT_APP_MIXPANEL_ID as string\nconst MIXPANEL_PROXY_HOST = process.env.REACT_APP_MIXPANEL_PROXY_HOST as string\n\nexport const MixpanelTracker: TrackerInterface = createTracker({\n  async init() {\n    mixpanel.init(MIXPANEL_ID, { api_host: MIXPANEL_PROXY_HOST })\n  },\n\n  async identify(vkId: number): Promise<void> {\n    const userParams = {\n      'utm source': URLUtils.getHashParam('utm_source'),\n    }\n    mixpanel.identify(String(vkId))\n    mixpanel.people.set_once(userParams)\n    mixpanel.register_once(userParams)\n  },\n\n  async reachGoal(\n    name: string,\n    params?: Record<string, unknown>\n  ): Promise<void> {\n    mixpanel.track(name, params)\n  },\n})\n","import { Utils } from '../../Utils'\nimport { LocalTracker } from './LocalTracker'\nimport { MixpanelTracker } from './MixpanelTracker'\nimport { TrackerInterface } from './tracker-utils'\n\nconst registeredTrackers = Utils.isProductionMode\n  ? [MixpanelTracker]\n  : [LocalTracker]\n\nfunction call<T extends keyof Omit<TrackerInterface, 'AUTOMATIC_OPERATIONS'>>(\n  method: T,\n  ...args: Parameters<TrackerInterface[T]>\n) {\n  registeredTrackers.forEach((tracker) => {\n    if (\n      tracker.AUTOMATIC_OPERATIONS[0] === '*' ||\n      tracker.AUTOMATIC_OPERATIONS.includes(method)\n    ) {\n      const fn = tracker[method]\n      // @ts-ignore\n      fn(...args)\n    }\n  })\n}\n\nexport const trackers = {\n  identify(vkId: number): void {\n    call('identify', vkId)\n  },\n\n  init(): void {\n    call('init')\n  },\n\n  reachGoal(name: string, params?: Record<string, unknown>): void {\n    call('reachGoal', name, params)\n  },\n}\n","export enum Themes {\n  bright_light = 'bright_light',\n  space_gray = 'space_gray',\n}\n","import { useEffect, useState } from 'react'\nimport { trackers } from '../trackers/trackers'\nimport bridge, { UserInfo } from '@vkontakte/vk-bridge'\n\ntype Props = {\n  children({\n    user,\n    loadingUser,\n  }: {\n    user: UserInfo | null\n    loadingUser: boolean\n  }): JSX.Element\n}\n\nexport function WithUser({ children }: Props): JSX.Element {\n  const [user, setUser] = useState<UserInfo | null>(null)\n  const [loadingUser, setLoadingUser] = useState(false)\n\n  async function fetchUser(isInitialRequest = false) {\n    setLoadingUser(true)\n    try {\n      const vkUser = await bridge.send('VKWebAppGetUserInfo')\n      setUser(vkUser)\n      if (isInitialRequest) {\n        trackers.identify(vkUser.id)\n      }\n    } finally {\n      setLoadingUser(false)\n    }\n  }\n\n  useEffect(() => {\n    fetchUser(true)\n  }, [])\n\n  return children({\n    user,\n    loadingUser,\n  })\n}\n","import { useEffect, useState } from 'react'\nimport * as Sentry from '@sentry/react'\nimport { Alert, AppRoot } from '@vkontakte/vkui'\nimport bridge from '@vkontakte/vk-bridge'\nimport { Utils } from '../../Utils'\nimport { App } from '../App/App'\nimport { WithUser } from '../../core/components/WithUser'\nimport { trackers } from '../../core/trackers/trackers'\nimport { Themes } from '../../constants'\nimport '@vkontakte/vkui/dist/vkui.css'\n\nexport function AppWrapper(): JSX.Element {\n  const [popout, setPopout] = useState<JSX.Element | null>(null)\n  const [theme, setTheme] = useState<Themes>(Themes.bright_light)\n\n  useEffect(() => {\n    bridge.send('VKWebAppInit')\n    bridge.subscribe(({ detail: { type, data } }) => {\n      if (type === 'VKWebAppUpdateConfig') {\n        // @ts-ignore\n        setTheme(data.scheme || Themes.bright_light)\n      }\n    })\n  }, [])\n\n  useEffect(() => {\n    const schemeAttribute = document.createAttribute('scheme')\n    schemeAttribute.value = theme\n    document.body.attributes.setNamedItem(schemeAttribute)\n  }, [theme])\n\n  useEffect(() => {\n    if (Utils.isProductionMode) {\n      Sentry.init({\n        dsn: process.env.REACT_APP_SENTRY_DSN,\n        beforeSend(event, hint) {\n          if (event.exception) {\n            const errorMessage =\n              hint &&\n              hint.originalException &&\n              hint.originalException instanceof Error &&\n              hint.originalException.message\n                ? hint.originalException.message\n                : ''\n            setPopout(\n              <Alert\n                actions={[\n                  {\n                    mode: 'default',\n                    title: 'ОК',\n                    autoclose: true,\n                  },\n                ]}\n                onClose={() => setPopout(null)}\n              >\n                <h3>Возникла ошибка =(</h3>\n                {errorMessage && <p>{errorMessage}</p>}\n                <p>Попробуй еще раз</p>\n              </Alert>\n            )\n          }\n          return event\n        },\n      })\n    }\n    trackers.init()\n    trackers.reachGoal('open app')\n  }, [])\n\n  return (\n    <AppRoot>\n      <WithUser>\n        {({ loadingUser }) => <App loadingUser={loadingUser} popout={popout} />}\n      </WithUser>\n    </AppRoot>\n  )\n}\n","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport reportWebVitals from './reportWebVitals'\nimport { ErrorBoundary } from './components/utils/ErrorBoundary'\nimport { AppWrapper } from './components/AppWrapper/AppWrapper'\n\nReactDOM.render(\n  <React.StrictMode>\n    <ErrorBoundary>\n      <AppWrapper />\n    </ErrorBoundary>\n  </React.StrictMode>,\n  document.getElementById('root')\n)\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals()\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"canvasWrapper\":\"DiceHome_canvasWrapper__1lXrM\"};"],"sourceRoot":""}