(this["webpackJsonpdice-ui"]=this["webpackJsonpdice-ui"]||[]).push([[0],{166:function(e,t,n){"use strict";n.r(t);var c=n(1),r=n.n(c),a=n(36),i=n.n(a),o=function(e){e&&n.e(3).then(n.bind(null,173)).then((function(t){var n=t.getCLS,c=t.getFID,r=t.getFCP,a=t.getLCP,i=t.getTTFB;n(e),c(e),r(e),a(e),i(e)}))},s=n(170),u=n(13),f=n(37),d=function e(){Object(f.a)(this,e)};d.isProductionMode=!0;var l=n(6);function b(e){var t=e.children;return d.isProductionMode?Object(l.jsx)(s.a,{fallback:function(e){var t=e.error,n=e.componentStack,c=e.resetError;return Object(l.jsxs)(l.Fragment,{children:[Object(l.jsx)("div",{children:"\u041e\u0448\u0438\u0431\u043a\u0430 \u043e\u0442\u0440\u0438\u0441\u043e\u0432\u043a\u0438:"}),Object(l.jsx)("p",{children:t.message}),Object(l.jsx)("p",{children:n}),Object(l.jsx)(u.c,{onClick:c,children:"\u041f\u043e\u043f\u0440\u043e\u0431\u043e\u0432\u0430\u0442\u044c \u0435\u0449\u0435 \u0440\u0430\u0437"})]})},children:t}):t}var j=n(14),p=n(172),h=n(27),O=n.n(h);function g(e){var t=e.loadingUser,n=e.popout,r=Object(c.useState)(!1),a=Object(j.a)(r,2),i=a[0],o=a[1],s=Object(c.useState)("dice"),f=Object(j.a)(s,2),d=f[0],b=f[1],p=Object(c.useState)("home"),h=Object(j.a)(p,2),O=h[0];h[1];Object(c.useEffect)((function(){var e;return t?e=window.setTimeout((function(){o(!0)}),200):o(!1),function(){clearTimeout(e)}}),[t]);var g=null;return n?g=n:t&&i&&(g=Object(l.jsx)(u.g,{})),Object(l.jsx)(u.d,{activeStory:d,tabbar:Object(l.jsx)(u.h,{children:Object(l.jsx)(u.i,{text:"\u0413\u043b\u0430\u0432\u043d\u0430\u044f",selected:"dice"===d,onClick:function(){b("game")}})}),children:Object(l.jsx)(u.j,{id:"dice",activePanel:O,popout:g,children:Object(l.jsx)(u.e,{id:"home",children:"main"})})})}var v=n(11),x=n.n(v),m=n(23),w=n(56),k=function(e){return Object(w.a)({AUTOMATIC_OPERATIONS:["*"]},e)},y=k({init:function(){return Object(m.a)(x.a.mark((function e(){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("Init tracker");case 1:case"end":return e.stop()}}),e)})))()},identify:function(e){return Object(m.a)(x.a.mark((function t(){return x.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:console.log("linked session with vkId ".concat(e));case 1:case"end":return t.stop()}}),t)})))()},reachGoal:function(e,t){return Object(m.a)(x.a.mark((function n(){return x.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:t?console.log("Reach goal ".concat(e," with params"),t):console.log("Reach goal ".concat(e));case 1:case"end":return n.stop()}}),n)})))()}}),E=n(31),S=n.n(E),A=n(55),I=function(){function e(){Object(f.a)(this,e)}return Object(A.a)(e,null,[{key:"getHashParam",value:function(e){return new URLSearchParams(window.location.hash.slice(1)).get(e)||""}}]),e}(),P=k({init:function(){return Object(m.a)(x.a.mark((function e(){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:S.a.init("7563fd36cf4497fd02bdc04ffa6e91b7",{api_host:"https://mp-proxy.akani.tmweb.ru"});case 1:case"end":return e.stop()}}),e)})))()},identify:function(e){return Object(m.a)(x.a.mark((function t(){var n;return x.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n={"utm source":I.getHashParam("utm_source")},S.a.identify(String(e)),S.a.people.set_once(n),S.a.register_once(n);case 4:case"end":return t.stop()}}),t)})))()},reachGoal:function(e,t){return Object(m.a)(x.a.mark((function n(){return x.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:S.a.track(e,t);case 1:case"end":return n.stop()}}),n)})))()}}),T=d.isProductionMode?[P]:[y];function _(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),c=1;c<t;c++)n[c-1]=arguments[c];T.forEach((function(t){if("*"===t.AUTOMATIC_OPERATIONS[0]||t.AUTOMATIC_OPERATIONS.includes(e)){var c=t[e];if("function"!==typeof c)throw new Error("Invalid tracker method: ".concat(e));c.apply(void 0,n)}}))}var C,U=function(e){_("identify",e)},M=function(){_("init")},R=function(e,t){_("reachGoal",e,t)};function F(e){var t=e.children,n=Object(c.useState)(null),r=Object(j.a)(n,2),a=r[0],i=r[1],o=Object(c.useState)(!1),s=Object(j.a)(o,2),u=s[0],f=s[1];function d(){return(d=Object(m.a)(x.a.mark((function e(){var t,n,c=arguments;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=c.length>0&&void 0!==c[0]&&c[0],f(!0),e.prev=2,e.next=5,O.a.send("VKWebAppGetUserInfo");case 5:n=e.sent,i(n),t&&U(n.id);case 8:return e.prev=8,f(!1),e.finish(8);case 11:case"end":return e.stop()}}),e,null,[[2,,8,11]])})))).apply(this,arguments)}return Object(c.useEffect)((function(){!function(){d.apply(this,arguments)}(!0)}),[]),t({user:a,loadingUser:u})}!function(e){e.bright_light="bright_light",e.space_gray="space_gray"}(C||(C={}));n(165);function G(){var e=Object(c.useState)(null),t=Object(j.a)(e,2),n=t[0],r=t[1],a=Object(c.useState)(C.bright_light),i=Object(j.a)(a,2),o=i[0],s=i[1];return Object(c.useEffect)((function(){O.a.send("VKWebAppInit"),O.a.subscribe((function(e){var t=e.detail,n=t.type,c=t.data;"VKWebAppUpdateConfig"===n&&s(c.scheme||C.bright_light)}))}),[]),Object(c.useEffect)((function(){var e=document.createAttribute("scheme");e.value=o,document.body.attributes.setNamedItem(e)}),[o]),Object(c.useEffect)((function(){d.isProductionMode&&p.a({dsn:"https://7bf1fed99e974079a290032a7ba45775@o158161.ingest.sentry.io/5831430",beforeSend:function(e,t){if(e.exception){var n=t&&t.originalException&&t.originalException instanceof Error&&t.originalException.message?t.originalException.message:"";r(Object(l.jsxs)(u.a,{actions:[{mode:"default",title:"\u041e\u041a",autoclose:!0}],onClose:function(){return r(null)},children:[Object(l.jsx)("h3",{children:"\u0412\u043e\u0437\u043d\u0438\u043a\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430 =("}),n&&Object(l.jsx)("p",{children:n}),Object(l.jsx)("p",{children:"\u041f\u043e\u043f\u0440\u043e\u0431\u0443\u0439 \u0435\u0449\u0435 \u0440\u0430\u0437"})]}))}return e}}),M(),R("open app")}),[]),Object(l.jsx)(u.b,{children:Object(l.jsx)(F,{children:function(e){var t=e.loadingUser;return Object(l.jsx)(g,{loadingUser:t,popout:n})}})})}i.a.render(Object(l.jsx)(r.a.StrictMode,{children:Object(l.jsx)(b,{children:Object(l.jsx)(G,{})})}),document.getElementById("root")),o()}},[[166,1,2]]]);
//# sourceMappingURL=main.61e0e870.chunk.js.map