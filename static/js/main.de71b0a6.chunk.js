(this["webpackJsonpdice-ui"]=this["webpackJsonpdice-ui"]||[]).push([[0],{201:function(e,t,n){"use strict";n.r(t);var a=n(1),r=n.n(a),c=n(59),i=n.n(c),o=function(e){e&&n.e(3).then(n.bind(null,209)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,c=t.getLCP,i=t.getTTFB;n(e),a(e),r(e),c(e),i(e)}))},s=n(205),u=n(31),l=n(0),d=n(2),j=n(6),f=function(){function e(){Object(l.a)(this,e)}return Object(d.a)(e,null,[{key:"generateRandom",value:function(e,t){return Math.floor(Math.random()*(t-e+1)+e)}},{key:"changeSignRandomly",value:function(t){return 0===e.generateRandom(0,1)?-t:t}},{key:"generateRandomWithRandomSign",value:function(t,n){return e.changeSignRandomly(e.generateRandom(t,n))}},{key:"getFovSize",value:function(e){var t=e.cameraFov,n=e.cameraAspect,a=e.xDistance,r=void 0===a?0:a,c=e.yDistance,i=void 0===c?0:c,o=e.zDistance,s=void 0===o?0:o,u=j.MathUtils.degToRad(t),l=Math.sqrt(Math.pow(r,2)+Math.pow(i,2)+Math.pow(s,2));return 2*Math.tan(u/2)*l*n}}]),e}();f.isProductionMode=!0;var h=n(9);function b(e){var t=e.children;return f.isProductionMode?Object(h.jsx)(s.a,{fallback:function(e){var t=e.error,n=e.componentStack,a=e.resetError;return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)("div",{children:"\u041e\u0448\u0438\u0431\u043a\u0430 \u043e\u0442\u0440\u0438\u0441\u043e\u0432\u043a\u0438:"}),Object(h.jsx)("p",{children:t.message}),Object(h.jsx)("p",{children:n}),Object(h.jsx)(u.c,{onClick:a,children:"\u041f\u043e\u043f\u0440\u043e\u0431\u043e\u0432\u0430\u0442\u044c \u0435\u0449\u0435 \u0440\u0430\u0437"})]})},children:t}):t}var p=n(11),O=n(208),g=n(45),m=n.n(g);var v=n(207),x=n(37),R=n(42),w=n.p+"static/media/black-wood.711c4483.jpeg";function y(){var e=Object(R.usePlane)((function(){return{rotation:[-Math.PI/2,0,0],position:[0,0,0]}})),t=Object(p.a)(e,1)[0],n=Object(x.c)(j.TextureLoader,w);return n.wrapS=j.RepeatWrapping,n.repeat.set(4,1),Object(h.jsxs)("mesh",{ref:t,children:[Object(h.jsx)("planeBufferGeometry",{args:[30,30]}),Object(h.jsx)("meshStandardMaterial",{map:n})]})}var S=n(86),M=n.p+"static/media/one-dice.11b109f6.lwo",k=.55,E=Object(a.forwardRef)((function(e,t){var n=Object(x.c)(S.a,M).meshes[0];n.scale.set(.25,.25,.25),n.rotation.set(0,0,j.MathUtils.degToRad(-45)),n.position.set(-.5,-.5,0);var r=Object(R.useBox)((function(){return{mass:.1,position:[0,2,0],rotation:[0,0,j.MathUtils.degToRad(30)]}})),c=Object(p.a)(r,2),i=c[0],o=c[1];return Object(a.useImperativeHandle)(t,(function(){return{roll:function(){o.velocity.set(f.generateRandomWithRandomSign(5,10),f.generateRandomWithRandomSign(5,10),f.generateRandomWithRandomSign(5,10)),o.angularVelocity.set(f.generateRandomWithRandomSign(5,20),f.generateRandomWithRandomSign(5,20),f.generateRandomWithRandomSign(5,20))}}})),Object(h.jsxs)("mesh",{ref:i,scale:[k,k,k],children:[Object(h.jsx)("boxBufferGeometry",{}),Object(h.jsx)("meshBasicMaterial",{opacity:0,transparent:!0}),Object(h.jsx)("mesh",{children:Object(h.jsx)("primitive",{object:n})})]})})),T=n(17),I=n.n(T),P=n(25);function U(e){var t=e.children,n=Object(a.useState)(null),r=Object(p.a)(n,2),c=r[0];r[1];return Object(a.useEffect)((function(){}),[]),c?Object(h.jsx)(c,{scale:1.1,children:t}):Object(h.jsx)(h.Fragment,{children:t})}var A=n(85),W=n.n(A);function _(e){var t=Object(R.usePlane)((function(){return e})),n=Object(p.a)(t,1)[0];return Object(h.jsxs)("mesh",{ref:n,children:[Object(h.jsx)("planeBufferGeometry",{args:[30,30]}),Object(h.jsx)("meshStandardMaterial",{transparent:!0,opacity:0})]})}function C(e){var t=e.viewWidth/2;return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(_,{rotation:[0,0,0],position:[0,0,-7]},"top"),Object(h.jsx)(_,{rotation:[0,j.MathUtils.degToRad(180),0],position:[0,0,5]},"bottom"),Object(h.jsx)(_,{rotation:[0,j.MathUtils.degToRad(115),0],position:[-t,0,0]},"left"),Object(h.jsx)(_,{rotation:[0,j.MathUtils.degToRad(-115),0],position:[t,0,0]},"right"),Object(h.jsx)(_,{rotation:[Math.PI/2,0,0],position:[0,6,0]},"ceiling")]})}var F=function(){var e=Object(a.useRef)(null),t=Object(a.useState)(0),n=Object(p.a)(t,2),r=n[0],c=n[1];return Object(h.jsx)("div",{className:W.a.canvasWrapper,children:Object(h.jsx)(x.a,{onCreated:function(e){var t=e.gl,n=e.camera;t.physicallyCorrectLights=!0;var a=n;a.setRotationFromEuler(new j.Euler(j.MathUtils.degToRad(-60),0,0)),a.translateY(3.5),a.translateZ(4.5),c(f.getFovSize({cameraFov:a.fov,cameraAspect:a.aspect,yDistance:3.5,zDistance:4.5}))},gl:{antialias:!0},onPointerMissed:function(){var t;return null===(t=e.current)||void 0===t?void 0:t.roll()},children:Object(h.jsx)(a.Suspense,{fallback:null,children:Object(h.jsx)(R.Physics,{gravity:[0,-9.82,0],defaultContactMaterial:{friction:.1,restitution:.6,contactEquationStiffness:1e7,contactEquationRelaxation:1,frictionEquationStiffness:1e7,frictionEquationRelaxation:2},children:Object(h.jsxs)(U,{children:[Object(h.jsx)("color",{attach:"background",args:["lightgrey"]}),Object(h.jsx)("directionalLight",{color:"white",intensity:2.5,position:[0,8,5]}),Object(h.jsx)(E,{ref:e}),Object(h.jsx)(y,{}),Object(h.jsx)(C,{viewWidth:r})]})})})})})},B=[{title:"\u0413\u043b\u0430\u0432\u043d\u0430\u044f",Icon:v.a,storyId:"dice",renderView:function(){return Object(h.jsx)(F,{})}}];function D(e){var t=e.loadingUser,n=e.popout,r=Object(a.useState)(!1),c=Object(p.a)(r,2),i=c[0],o=c[1];Object(a.useEffect)((function(){var e;return t?e=window.setTimeout((function(){o(!0)}),200):o(!1),function(){clearTimeout(e)}}),[t]);var s=null;return n?s=n:t&&i&&(s=Object(h.jsx)(u.f,{})),Object(h.jsx)(h.Fragment,{children:B.map((function(e){var t=e.storyId,n=e.renderView;return Object(h.jsx)(u.g,{id:t,activePanel:"".concat(t,"-home"),popout:s,children:Object(h.jsx)(u.d,{id:"".concat(t,"-home"),children:n()})},t)}))})}var G=n(10),L=function(e){return Object(G.a)({AUTOMATIC_OPERATIONS:["*"]},e)},V=L({init:function(){return Object(P.a)(I.a.mark((function e(){return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("Init tracker");case 1:case"end":return e.stop()}}),e)})))()},identify:function(e){return Object(P.a)(I.a.mark((function t(){return I.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:console.log("linked session with vkId ".concat(e));case 1:case"end":return t.stop()}}),t)})))()},reachGoal:function(e,t){return Object(P.a)(I.a.mark((function n(){return I.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:t?console.log("Reach goal ".concat(e," with params"),t):console.log("Reach goal ".concat(e));case 1:case"end":return n.stop()}}),n)})))()}}),q=n(51),N=n.n(q),z=function(){function e(){Object(l.a)(this,e)}return Object(d.a)(e,null,[{key:"getHashParam",value:function(e){return new URLSearchParams(window.location.hash.slice(1)).get(e)||""}}]),e}(),H=L({init:function(){return Object(P.a)(I.a.mark((function e(){return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:N.a.init("",{api_host:""});case 1:case"end":return e.stop()}}),e)})))()},identify:function(e){return Object(P.a)(I.a.mark((function t(){var n;return I.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n={"utm source":z.getHashParam("utm_source")},N.a.identify(String(e)),N.a.people.set_once(n),N.a.register_once(n);case 4:case"end":return t.stop()}}),t)})))()},reachGoal:function(e,t){return Object(P.a)(I.a.mark((function n(){return I.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:N.a.track(e,t);case 1:case"end":return n.stop()}}),n)})))()}}),K=f.isProductionMode?[H]:[V];function J(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),a=1;a<t;a++)n[a-1]=arguments[a];K.forEach((function(t){("*"===t.AUTOMATIC_OPERATIONS[0]||t.AUTOMATIC_OPERATIONS.includes(e))&&t[e].apply(void 0,n)}))}var X,Y=function(e){J("identify",e)},Z=function(){J("init")},Q=function(e,t){J("reachGoal",e,t)};function $(e){var t=e.children,n=Object(a.useState)(null),r=Object(p.a)(n,2),c=r[0],i=r[1],o=Object(a.useState)(!1),s=Object(p.a)(o,2),u=s[0],l=s[1];function d(){return(d=Object(P.a)(I.a.mark((function e(){var t,n,a=arguments;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]&&a[0],l(!0),e.prev=2,e.next=5,m.a.send("VKWebAppGetUserInfo");case 5:n=e.sent,i(n),t&&Y(n.id);case 8:return e.prev=8,l(!1),e.finish(8);case 11:case"end":return e.stop()}}),e,null,[[2,,8,11]])})))).apply(this,arguments)}return Object(a.useEffect)((function(){!function(){d.apply(this,arguments)}(!0)}),[]),t({user:c,loadingUser:u})}!function(e){e.bright_light="bright_light",e.space_gray="space_gray"}(X||(X={}));n(200);function ee(){var e=Object(a.useState)(null),t=Object(p.a)(e,2),n=t[0],r=t[1],c=Object(a.useState)(X.bright_light),i=Object(p.a)(c,2),o=i[0],s=i[1];return Object(a.useEffect)((function(){m.a.send("VKWebAppInit"),m.a.subscribe((function(e){var t=e.detail,n=t.type,a=t.data;"VKWebAppUpdateConfig"===n&&s(a.scheme||X.bright_light)}))}),[]),Object(a.useEffect)((function(){var e=document.createAttribute("scheme");e.value=o,document.body.attributes.setNamedItem(e)}),[o]),Object(a.useEffect)((function(){f.isProductionMode&&O.a({dsn:"",beforeSend:function(e,t){if(e.exception){var n=t&&t.originalException&&t.originalException instanceof Error&&t.originalException.message?t.originalException.message:"";r(Object(h.jsxs)(u.a,{actions:[{mode:"default",title:"\u041e\u041a",autoclose:!0}],onClose:function(){return r(null)},children:[Object(h.jsx)("h3",{children:"\u0412\u043e\u0437\u043d\u0438\u043a\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430 =("}),n&&Object(h.jsx)("p",{children:n}),Object(h.jsx)("p",{children:"\u041f\u043e\u043f\u0440\u043e\u0431\u0443\u0439 \u0435\u0449\u0435 \u0440\u0430\u0437"})]}))}return e}}),Z(),Q("open app")}),[]),Object(h.jsx)(u.b,{children:Object(h.jsx)($,{children:function(e){var t=e.loadingUser;return Object(h.jsx)(D,{loadingUser:t,popout:n})}})})}i.a.render(Object(h.jsx)(r.a.StrictMode,{children:Object(h.jsx)(b,{children:Object(h.jsx)(ee,{})})}),document.getElementById("root")),o()},85:function(e,t,n){e.exports={canvasWrapper:"DiceHome_canvasWrapper__1lXrM"}}},[[201,1,2]]]);
//# sourceMappingURL=main.de71b0a6.chunk.js.map